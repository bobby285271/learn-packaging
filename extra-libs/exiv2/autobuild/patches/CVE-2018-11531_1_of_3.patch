From ed874703ad553338f973d537b8159d0eb4375cc4 Mon Sep 17 00:00:00 2001
From: Luis Diaz Mas <piponazo@gmail.com>
Date: Fri, 25 May 2018 22:03:26 +0200
Subject: [PATCH] Prevent call to memcpy with size==0

(cherry picked from commit ed874703ad553338f973d537b8159d0eb4375cc4)
[rcs: Backported to jessie]
---
 src/preview.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: exiv2-0.25/src/preview.cpp
===================================================================
--- exiv2-0.25.orig/src/preview.cpp
+++ exiv2-0.25/src/preview.cpp
@@ -810,7 +810,7 @@ namespace {
                     for (int i = 0; i < sizes.count(); i++) {
                         uint32_t offset = dataValue.toLong(i);
                         uint32_t size = sizes.toLong(i);
-                        if (offset + size <= static_cast<uint32_t>(io.size()))
+                        if (size!=0 && offset + size <= static_cast<uint32_t>(io.size()))
                             memcpy(pos, base + offset, size);
                         pos += size;
                     }
